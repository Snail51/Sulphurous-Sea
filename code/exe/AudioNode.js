// MINIFIED VERSION OF THE FILE OF THE SAME NAME IN THE `src` FOLDER
// MINIFIED WITH https://www.toptal.com/developers/javascript-minifier
// MINIFIED AT Tue Jun 10 14:39:23 CDT 2025

export class AudioNode{constructor(t,e,i){this.audioCtx=e,this.elements=[],this.elements.push(i),this.playing=!1,this.volume=.25,this.loaded=0,this.error=!1,this.src=t,this.data=new ArrayBuffer,this.source,this.noise,window.addEventListener("beforeunload",()=>this.shutdown())}async load(){for(var t of(this.loaded=1,this.elements))t.style.backgroundColor="#8800cc";async function e(t){try{let e=await fetch(t,{method:"HEAD",cache:"no-store"});return e.ok}catch(i){return console.error("Error checking file:",i),!1}}if(this.lock(),!await e(this.src)){this.error=!0,console.error(`Error loading ${this.src}`),this.elements.forEach((t,e)=>{t.style.backgroundColor="#ff0000"});return}var i,s=this.elements[0].querySelectorAll(".SLIDER")[0].value,o=new XMLHttpRequest;o.open("GET",this.src,!0),o.responseType="arraybuffer",o.onload=function(t){i=this.response},o.onprogress=t=>{for(var e of this.elements)e.querySelectorAll(".SLIDER")[0].value=t.loaded/t.total*100},o.onloadend=t=>{console.debug("ArrayBuffer loaded successfully:",i)},o.send(),await new Promise(t=>{console.log(o),o.onloadend=()=>t()});let a=i;for(let r of this.elements)r.querySelectorAll(".SLIDER")[0].value=s;this.loaded=2,this.data=await this.audioCtx.decodeAudioData(a),this.source=await this.audioCtx.createBufferSource(),this.source.buffer=this.data,this.source.loop=!0,this.loaded=3,this.noise=await this.audioCtx.createGain(),await this.source.connect(this.noise),this.noise.gain.setValueAtTime(0,this.audioCtx.currentTime),await this.noise.connect(this.audioCtx.destination),this.loaded=4,await this.source.start(),await this.noise.disconnect(),this.loaded=5,this.unlock(),console.debug(`${this.src} - Finished loading data for AudioNode`)}async play(){if(0==this.loaded&&await this.load(),5==this.loaded){for(var t of this.elements)t.style.backgroundColor="#999999";this.noise.gain.setValueAtTime(0,this.audioCtx.currentTime),await this.noise.connect(this.audioCtx.destination),this.noise.gain.setTargetAtTime(this.volume,this.audioCtx.currentTime,.183),this.playing=!0,console.debug(`${this.src} - Started Playback of AudioNode`)}}async stop(){if(0==this.loaded&&await this.load(),5==this.loaded){for(var t of this.elements)t.style.backgroundColor="#555555";this.noise.gain.setTargetAtTime(0,this.audioCtx.currentTime,.183),this.lock(),console.debug(`${this.src} - Started Shutdown of AudioNode`),window.setTimeout(()=>{this.noise.disconnect(),this.playing=!1,this.unlock(),console.debug(`${this.src} - Halted Playback of AudioNode`)},1e3)}}async toggle(t){if(t&&!(performance.timing.navigationStart+t.timeStamp+500>=Date.now())){console.debug("Alert blocked execution for too long. Aborting.");return}!1==this.playing?await this.play():await this.stop()}async adjustVolume(t,e){if(this.volume=t,this.noise&&this.noise.gain.setValueAtTime(this.volume,this.audioCtx.currentTime),e)for(var i of this.elements)i.querySelectorAll(".SLIDER")[0].value=e;else for(var i of this.elements)i.querySelectorAll(".SLIDER")[0].value=100*Math.cbrt(t)}lock(){for(var t of this.elements)t.querySelectorAll(".audioButton")[0].setAttribute("disabled",""),t.querySelectorAll(".SLIDER")[0].setAttribute("disabled","")}unlock(){for(var t of this.elements)t.querySelectorAll(".audioButton")[0].removeAttribute("disabled"),t.querySelectorAll(".SLIDER")[0].removeAttribute("disabled")}async shutdown(){if(this.loaded>0){try{this.source.stop()}catch(t){console.error(t)}try{this.noise.disconnect()}catch(e){console.error(e)}try{this.source.disconnect()}catch(i){console.error(i)}console.debug(`${this.src} - Shutdown AudioNode`)}}async addPointer(t){this.elements.push(t)}}